\section{Equational Theory}
\label{sec:equational}

\subsection{Equations on Structural Transformations}
\label{sec:equational-transformations}

First, we need a notation for derivations of the $\alpha \spr \beta$
judgement in Figure~\ref{fig:2multicategory}.  We assume names for
constants are given in the signature $\Sigma$, and write $1_\alpha$ for
reflexivity, $s_1;s_2$ for transitivity (in diagramatic order), and
$s_1[s_2/x]$ for congruence.  We allow the signature $\Sigma$ to provide
some axioms for equality of transformations $s_1 \deq s_2$ (for two
derivations of the same judgement $s_1,s_2 ::
\wfsp{\psi}{\alpha}{\beta}{p}$), and define equality to be the least
congruence closed under those axioms and the following associativity,
unit, and interchange laws:

\begin{itemize}
\item $1_\alpha;s \deq s \deq s;1_\beta \text{ for } s :: \alpha \spr \beta$
\item $(s_1;s_2);s_3 \deq s_1;(s_2;s_3)$
\item $s[1_x/x] \deq s \deq 1_x[s/x] \text{ for } s :: \wfsp{\psi,x,\psi'}{\alpha}{\beta}{r}$
\item $\subst{\subst{s_1}{s_2}{x}}{s_3}{y} \deq
\subst{\subst{s_1}{s_3}{y}}{\subst{s_2}{s_3}{y}}{x}$ as transformations
${\subst{\subst{\alpha_1}{\alpha_2}{x}}{\alpha_3}{y}} \spr
{\subst{\subst{\beta_1}{\beta_2}{x}}{\beta_3}{y}}$ for $s_1 :: (\wfsp{\psi,x:p,y:q}{\alpha_1}{\beta_1}{r}), 
 s_2 :: (\wfsp{\psi,y:q}{\alpha_2}{\beta_2}{p}), 
 s_3 :: (\wfsp{\psi}{\alpha_3}{\beta_3}{q})$ 
\item $s_1[t_1/x];s_2[t_2/x] \deq (s_1;s_2)[(t_1;t_2)/x]$
as morphisms $\alpha_1[\beta_1/x] \spr \alpha_3[\beta_3/x]$
for $s_1 :: (\wfsp{\psi,x:p,\psi'}{\alpha_1}{\alpha_2}{r})$,
 $s_2 :: (\wfsp{\psi,x:p,\psi'}{\alpha_2}{\alpha_3}{r})$
 $t_1 :: (\wfsp{\psi,\psi'}{\beta_1}{\beta_2}{p})$
 $t_2 :: (\wfsp{\psi,\psi'}{\beta_2}{\beta_3}{p})$
\item $\subst{1_\alpha}{1_\beta}{x} \deq 1_{\subst{\alpha}{\beta}{x}}$
\item $1_\alpha[s/y] \deq 1_\alpha$ if $y \# \alpha$
\end{itemize}

\noindent These are the 2-category axioms extended to the
multicategorical case.  The first two rules are associativity and unit
for both kinds of compositions; the next two are interchange; the final
is because terms with variables that do not occur are an implicit
notation for product projections.  The associativity and unit laws for
congruence/horizontal composition $(s[s'/x])$ require the analogous
associativity for composition $(\alpha[\alpha'/x])$ (which is true
syntactically) to type check.

As we did with equality of context descriptors, we think of all
definitions as being parametrized by \deq-equivalence-classes of
transformations, not raw syntax.

\subsection{Equations on Derivations}

To simplify the axiomatic description of equality, we give a notation
for derivations where the admissible
transformation, identity, and cut rules are internalized as explicit
rules---so the calculus has the flavor of an explicit substitution one.
We use the following notation for derivations:
\[
\begin{array}{rcl}
\D & ::= & \Ident{x} \mid \Trd{s}{\D} \mid \Cut{\D_1}{\D_2}{x} \mid
 \FLd{x}{\Delta.\D} \mid \FRd{\gamma}{s}{\vec{\D_i/x_i}} \mid \ULd{x}{\gamma}{s}{\vec{\D_i/x_i}}{\D} \mid \URd{\Delta.\D} 
\end{array}
\]
We omit the primitive hypothesis rule for atoms (it is derivable),
write $x$ for identity (Theorem~\ref{thm:identity}), \Trd{s}{\D} for
respect for transformations (Lemma~\ref{lem:respectspr}---identity for
atoms combines this and identity) and \Cut{\D_1}{\D_2}{x} for cut
(Theorem~\ref{thm:cut}).  The next 4 terms correspond to the 4
\Usymb/\Fsymb rules.  from Figure~\ref{fig:sequent}.  
We do not notate weakenings or exchanges in these terms.

We write \FRs\/ for $\FRd{\vec{x/x}}{1_\alpha}{\Ident{x}/x} ::
\seq{\Gamma}{\alpha}{\F{\alpha}{\Delta}}$ when $\Delta \subseteq \Gamma$
and we write and \ULs{x} for $\ULd{x}{\vec{x/x}}{1_\alpha}{\Ident{x}/x}{z.z} ::
\seq{\Gamma}{\alpha}{A}$ when $x:\U{x.\alpha}{\Delta}{A} \in \Gamma$ and
$\Delta \subseteq \Gamma$.  

The equational theory of derivations is the least congruence containing
the equations in Figure~\ref{fig:equality-of-derivations}.

\begin{figure}
\[
\begin{array}{rcll} 
\Cut{\D}{\Ident{x}}{x} & \deq & \D \\
\Cut{\Ident{x}}{\D}{x} & \deq & \D \\
\Cut{\D_1}{\D_2}{x} & \deq & \D_1 & \text{if $x \# \D_1$}\\
\Cut{(\Cut{\D_1}{\D_2}{x})}{\D_3}{y} & \deq & \Cut{(\Cut{\D_1}{\D_3}{y})}{\Cut{\D_2}{\D_3}{y}}{x}\\
\\
\Trd{1}{\D} & \deq & \D\\
\Trd{(s_1;s_2)}{\D} & \deq & \Trd{{s_1}}{\Trd{{s_2}}{\D}} \\
\Trd{(\subst{s_2}{s_1}{x})}{\Cut{\D_2}{\D_1}{x}} & \deq & \Cut{\Trd{{s_2}}{\D_2}}{\Trd{{s_1}}{\D_1}}{x} \\
\\
\Cut{\FLd{x_0}{\Delta.\D}}{\FRd{}{s}{\vec{\D_i/x_i}}}{x_0} & \deq & \Trd{(1_\beta[s/x_0])}{\D[\vec{\D_i/x_i}]} \\
%% special case \Cut{\FLd{x_0}{\D}}{\FRs}{x_0} & \deq & \D \\
\Cut{\ULd{x_0}{}{s}{\vec{\D_i}/x_i}{z.\D'}}{\URd{\Delta.\D}}{x_0} & \deq & \Trd{(s[1_{\alpha}/{x_0}])}{\Cut{\D'}{(\D[{\vec{d_i}/x_i}])}{z}} \\
\D :: \seq{\Gamma}{\beta}{\U{x.\alpha}{\Delta}{A}} & \deq & \URd{\Delta.\Cut{\ULs x}{\D}{x}}\\
\D :: \seq{\Gamma,x:\F{\alpha}{\Delta},\Gamma'}{\beta}{C} & \deq & \FLd{x}{\Delta.\Cut{\D}{\FRs}{x}}\\
\end{array}
\]
\caption{Equality of Derivations}
\label{fig:equality-of-derivations}
\end{figure}

The first two equations say that identity is a unit for cut.  The third
says that non-occurence of a variable is a projection (with more
explicit weakening, the notation $x \# \D_1$ means that $\D_1$ is the
weakening of some derivation $\seq{\Gamma,\Gamma'}{\alpha}{C}$ to
$\seq{\Gamma,x:A,\Gamma'}{\alpha}{C}$, and the equation says that we
return that original derivation).  The fourth is functoriality of cut
(when phrased for single-variable substitutions, the equation
$\D[\theta][\theta'] \deq \D[\theta[\theta']]$ becomes a rule for
commuting substitutions).

In the next group, the first two rules say that the action of a
transformation is functorial, and commutes with cut.  The typing in the
third rule is $\D_1 :: \seq{\Gamma}{\alpha'}{A}$ and $\D_2 ::
\seq{\Gamma,x:A}{\beta'}{C}$ and $s_1 :: \alpha \spr \alpha'$ and $s_2
:: \beta \spr \beta'$, so both sides are derivations of as derivations
of \seq{\Gamma}{\subst{\beta}{\alpha}{x}}{C}.

In the next group, we have the $\beta\eta$-laws for \dsd{F} and \dsd{U}.  The $\beta$ laws are the
principal cut cases given above.  By the composition law for cut, the
simultaneous substitution can be defined as iterated substitution in any
order.  The $\eta$ law for \Usymb\/ equates any derivation to
\[
\infer[\UR]
      {\seq{\Gamma}{\alpha}{\U{x.\alpha}{\Delta}{A}}}
      {\infer[\dsd{cut}]
             {\seq{\Gamma,\Delta}{\subst{\beta}{\alpha}{x}}{\U{x.\alpha}{\Delta}{A}}}
             {\deduce{\seq{\Gamma,\Delta}{\beta}{\U{x.\alpha}{\Delta}{A}}}{\D} &
               \infer[\UL*]{\seq{\Gamma,\Delta,x:\U{x.\alpha}{\Delta}{A}}{\alpha}{A}}
                           {}
      }}
\]
The $\eta$ law for \Fsymb\/ equates any derivation to 
\[
\infer[\FL]{\seq{\Gamma,x:\F{\alpha}{\Delta},\Gamma'}{\beta}{C}}
      {\infer[\dsd{cut}]
        {\seq{\Gamma,\Gamma',\Delta}{\subst{\beta}{\alpha}{x}}{C}}
        {\infer[\FR^*]{\seq{\Gamma,\Gamma',\Delta}{\alpha}{\F{\alpha}{\Delta}}}{} &
          \D}}
\]

%% FIXME: need admissibility of weakening, exchange---weakening of equals
%% are equal etc.


%% commented out for author response PDF; restore later

\subsection{Alternative Presentation}

While the above axiomatiziation of equality is quite concise, for
adequacy proofs we will need an alternative characterization that is
easier to reason from.  For example, in the above equational theory, it
seems possible that an equation between two cut-free derivations
can be proved using an intermediate term that introduces a cut at a
completely unrelated formula.  It turns out that this is not the case,
as we can show by relating the above equational theory to the following
one.  

We say that a derivation is \emph{normal} if it uses only the rules 
in Figure~\ref{fig:sequent}---i.e. it does not use the cut
rule, and only uses the hypothesis rule and respect for
transformations in the form ($\Trd{s}{x}$) where $x$ has a base type.
In Figure~\ref{fig:admissible-rule-equations}, we write out the
proofs of respect for transformation (Lemma~\ref{lem:respectspr}), 
identity (Theorem~\ref{thm:identity}), 
left-inversion (Lemma~\ref{lem:Finv}), and
cut (Theorem~\ref{thm:cut}) as operations on normal derivations.  
We also include a corresponing right inversion lemma for \Usymb, which takes a
derivation of \seq{\Gamma}{\beta}{\U{x.\alpha}{\Delta}{A}}
to \seq{\Gamma}{\alpha[\beta/x]}{A}
when $\Delta$ is isomorphic to a subcontext of $\Gamma$.

\begin{figure}
\begin{small}
\[
\begin{array}{rcll}
\elim{\FLd{x}{\Delta.\D}} & := & \FLd{x}{\Delta.\elim \D}\\
\elim{\URd{\Delta.\D}} & := & \URd{\Delta.\elim \D}\\
\elim{\FRd{}{s}{\vec{\D/x}}} & := & \FRd{}{s}{\vec{\elim{\D}/x}}\\
\elim{\ULd{x}{}{s}{\vec{\D/x}}{z.\D}} & := & {\ULd{x}{}{s}{\vec{\elim \D/x}}{z.\elim \D}}\\
\elim{\Trd{s}{\D}} & := & \Trda{s}{\elim \D}\\
\elim{\Cut{\E}{\D}{x}} & := & \Cuta{\elim \E}{\elim \D}{x}\\
\elim{{x}} & := & \Identa{x}\\
\\
\Trda{s}{\FRd{}{s'}{\vec{\D/x}}} & := & \FRd{}{s;s'}{\vec{\D/x}}\\
\Trda{s}{\FLd{x}{\Delta.\D}} & := & \FLd{x}{\Delta.\Trda{(s[1_\alpha/x])}{\D}}\\
\Trda{s}{\ULd{x}{}{s'}{\vec{\D/y}}{z.\D'}} & := & {\ULd{x}{}{s;s'}{\vec{\D/y}}{z.\D'}}\\
\Trda{s}{\URd{\Delta.\D}} & := & \URd{\Delta.\Trda{(1_\alpha[s/x])}{\D}} \\
\\
\Identa{x} :: (\seq{\Gamma,x:\F{\alpha}{\Delta},\Gamma'}{x}{\F{\alpha}{\Delta}}) & := & \FLd{x}{\Delta.\FRd{\vec{\Identa{y}/y}}{1}{\vec{\Identa{y}/y}}}\\
\Identa{x} :: (\seq{\Gamma,x:\U{\alpha}{\Delta}{A},\Gamma'}{x}{\U{\alpha}{\Delta}{A}}) & := & \URd{\Delta.\ULd{x}{}{\vec{\Identa{y}/y}}{1}{z.\Identa{z}}} \\
\\
\Cuta{\Trd{s}{x_0}}{d}{x_0} & := & \Trda{s}{d} & (x_0 : Q)\\
\Cuta{\Trd{s}{y}}{d}{x_0} & := & \Trd{s}{y} & (x_0 \neq y)\\
\Cuta{\FLd{x_0}{\Delta.\E}}{\FRd{}{s}{\vec{\D_i/x_i}}}{x_0} & := & \Trd{(1_\beta[s/x])}{\Cutta \E {\vec{\D_i/x_i}}} \\
\Cuta{\ULd{x_0}{}{s}{\vec{\E_i}/x_i}{z.\E'}}{\URd{\Delta.\D}}{x_0} & := & \Trd{(s[1_{\alpha_0}])}{\Cuta{\E'}{(\Cutta \D {{\vec{\E_i/x_i}}})}{z}} &  \\
\Cuta{\FRd{}{s}{\E}}{\D}{x_0} & := & {\FRd{}{s[1_{\alpha_0}/x_0]}{\Cuta{\E}{\D}{x_0}}}\\
\Cuta{\URd{\Delta.\E}}{\D}{x_0} & := & \URd{\Delta.\Cuta{\E}{\D}{x_0}}\\
\Cuta{\FLd{x}{\Delta.\E}}{\D}{x_0} & := & \FLd{x}{\Delta.\Cuta{\E}{\Linv{\D}{\Delta}{x}}{x_0}} & (x \neq x_0) \\
\Cuta{\ULd{x}{}{s}{\vec{\E_i}/x_i}{z.\E'}}{\D}{x_0} & := & {\ULd{x}{}{s[1_{\alpha_0}/x_0]}{\vec{(\Cuta{\E_i}{\D}{x_0})/x_i}}{z.\Cuta{\E'}{\D}{x_0}}} & (x \neq x_0)\\
\Cuta{\E}{\FLd{x}{\Delta.\D}}{x_0} & := & \FLd{x}{\Delta.\Cuta{\Linv{\E}{\Delta}{x}}{\D}{x_0}} & (\E = \FL^{x_0},\UL^{x_0})\\
\Cuta{\E}{\ULd{x}{}{s}{\vec{\D/y}}{z.\D_2}}{x_0} & := & \ULd{x}{}{1_\beta[s/x_0]}{\vec{\D/y}}{z.\Cuta{\E}{\D_2}{x_0}} & (\E = \FL^{x_0},\UL^{x_0}) \\
\\
\Linv{\Trd{s}{x}}{\vec{x}}{x_0} & := & {\Trd{s}{x}}\\
\Linv{\FLd{y}{\Delta.\D}}{\vec{x}}{x_0} & := & \D[\Delta \leftrightarrow \vec{x}]\\
\Linv{\FLd{x}{\Delta.\D}}{\vec{x}}{x_0} & := & \FLd{x}{\Delta.\Linv{\D}{\vec{x}}{x_0}} & (x \# x_0)\\
\Linv{\FRd{}{s}{\vec{\D_i/x_i}}}{\vec{x}}{x_0} & := & \FRd{}{{s[1_{\alpha_0}/x_0]}}{{{\Linv{\D_i}{\vec{x}}{y}}/x_i}}\\
\Linv{\URd{\Delta.\D}}{\vec{x}}{x_0} & := & \URd{\Delta.\Linv{\D}{\vec{x}}{x_0}} & \\
\Linv{\ULd{y}{}{s}{\vec{\D_i/y_i}}{z.\D}}{\vec{x}}{x_0} & := & \ULd{y}{}{s[1_{\alpha_0}/x_0]}{\Linv{\D_i}{\vec{x}}{x_0}/y_i}{z.\Linv{\D}{\vec{x}}{x_0}} & \\
\\
\Rinv{\URd{\Delta.\D}}{\vec{x}} & := & \D[\Delta \leftrightarrow \vec{x}]\\
\Rinv{\FLd{x}{\Delta.\D}}{\vec{x}} & := & \FLd{x}{\Delta.\Rinv{\D}{\vec{x}}} \\
\Rinv{\ULd{x}{}{s}{\vec{\D_i/y_i}}{z.\D}}{\vec{x}} & := & \ULd{x}{}{1_{\alpha_0}[s/x]}{\vec{\D_i/y_i}}{z.\Rinv{\D}{\vec{x}}}\\
\end{array}
\]
\end{small}
\caption{Definitions of Admissible Rules}
\label{fig:admissible-rule-equations}
\end{figure}

\begin{figure}
\begin{small}
\[
\begin{array}{rcll}
\D :: \seq{\Gamma,x:\F{\alpha}{\Delta},\Gamma'}{\beta}{C} & \deqp & \FLd{x}{\Delta.\Linv{\D}{\Delta}{x}}\\
\D :: \seq{\Gamma}{\beta}{\U{x.\alpha}{\Delta}{A}} & \deqp & \URd{\Delta.\Rinv{\D}{\Delta}}\\
\Cuta{c}{\ULd{x}{}{s}{\vec{\D/y}}{z.\D_2}}{x_0} & \deqp & \ULd{x}{}{1_\beta[s/x_0]}{\vec{\D/y}}{z.\Cuta{c}{\D_2}{x_0}}  \\
\\
\FRd{}{s}{\D_1/x_1,\ldots,\Trd{{s_i}}{\D_i}/x_i,\ldots} & \deqp & \FRd{}{s;(1_{\alpha[\alpha_1/x_1,\ldots,\alpha_{i-1}/x_{i-1},\ldots]}[s_i/x_i])}{\vec{\D_j/x_j}}\\
\ULd{x}{}{s}{(\D_1/x_1,\ldots,\Trd{{s_i}}{\D_i}/x_i,\ldots)}{z.\D} & \deqp & \ULd{x}{}{s;(1_{\beta'[\alpha[\alpha_1/x_1,\ldots,\alpha_{i-1}/x_{i-1},\ldots]/z]}[s_i/x_i])}{\vec{\D_j/x_j}}{z.\D}\\
\ULd{x}{}{s}{\vec{\D/x}}{z.\Trd{s'}{\D}} & \deqp & \ULd{x}{}{(s;s'[1_{\alpha[\gamma]}/z])}{\vec{\D/x}}{z.\D} \\
%% \\
%% more specific UL permutations
%% \ULd{x}{}{s}{\vec{\D/x}}{z.\D'} & \deqp & \Trd{s}{\D'} & (z \# \D')\\
%% \ULd{x}{}{s}{\vec{\D/x}}{z.\D'[z/z']} & \deqp & \ULd{x}{}{s}{\vec{\D/x}}{z.\ULd{x}{}{1}{\vec{\D/x}}{z'.\D'}}\\
%% \FRd{} %%{\vec{\alpha_j/x_j},\alpha_i/x_i}
%%     {s}{(\vec{\D_j/x_j},\ULd{x}{}{s'}{\vec{\E_i/y_i}}{z.\E}/x_i)} & \deqp &
%% \ULd{x}
%%     {} %% {\vec{\alpha_j/x_j},\alpha_i'[\alpha'[\gamma']/z]/x_i}
%%     {s;(1_{\alpha[\vec{\alpha_j/x_j}]}[s'/x_i])}{\vec{e_i/y_i}}{z.\FRd{}{1}{(\vec{\D_i/x_i},\E/x_j)}}\\
%% \ULd{x}{}{s}{(\vec{\D_j/x_j},\ULd{x'}{}{s'}{\vec{\E_i/y_i}}{z'.\D_i}/x_i)}{z.\D} 
%% & \deqp &
%% \ULd{x'}{}{s;1[s'/x_i]}{\vec{\E_i/y_i}}{z'.\ULd{x}{}{1}{(\vec{\D_j/x_j},\D_i/x_i)}{z.\D}}\\
%% \ULd{x}{}{s}{\vec{\D_i/x_i}}{z.\ULd{x'}{}{s'}{\vec{\E_j/y_j}}{z'.{\D}}}
%% & \deqp &
%% \ULd{x'}{}{s;(s'[1_{\alpha[\gamma]/z}])}{\vec{\E_j/y_j}}{z'.\ULd{x}{}{1}{\vec{\D_i/x_i}}{z.\D}} &
%% (z \# x',e_j)
\end{array}
\]
\end{small}
\caption{Permutative Equality}
\label{fig:permutative}
\end{figure}

Derivations where all cuts, identities, and transformations have been
expanded are not unique representatives of \deq-equivalence classes:
what remains is to move transformations around the derivation and
permute the order of rules.  We define permutative equality as the least
congruence on \emph{normal derivations} containing the rules in
Figure~\ref{fig:permutative}.

The first two rules are the uniqueness principles for \Fsymb\/ and
\Usymb\/, which allow moving \FL\/ and \UR\/ to the bottom of any
derivation.  

The next rule allows permuting \UL.  We write $c$ for a \emph{context},
which is an arbitrary normal derivation, except it is only allowed to
use the variable $x_0$ in subterms of the form \Identa{x_0} at the leaf
of a derivation, not in any other left/identity rule:
\[
c ::= \Identa{x_0} \mid \Trd{s}{x} \mid \FRd{}{s}{\vec{c_i/x_i}} \mid \FLd{x}{\Delta.c} \mid \URd{\Delta.c} \mid \ULd{x}{}{s}{\vec{c_i/x_i}}{z.c}
\]
The intention is a cut $\Cuta{c}{d}{x_0}$ is a simple substitution,
which right-commutes into $c$, replacing all derivation leaves of
$\Ident{x_0}$ with $d$.  
%% (FIXME: could define a separate notion of hole
%% and substitution for it if this doesn't actually work out nicely).  

The next three rules correspond to instances of
functoriality of the respect-for-transformations in \UL\/ and \FR\/.

\begin{lemma}
\[\FRd{}{s}{\vec{d/x}} \deq \Trd{s}{\FRs[\vec{d/x}]}\] and
 \[\ULd{x}{}{s}{\vec{d/y}}{z.d'} \deq \Trd{s}{d'[\ULs{x}[\vec{d/y}]/z]}\]
\end{lemma}
\begin{proof}
For $\FR$:
\begin{align*}
\FRd{}{s}{\vec{d/x}} 
&\deq \Cut{y}{\FRd{}{s}{\vec{d/x}}}{y} \\
&\deq \Cut{\FLd{y}{\Delta.\Cut{y}{\FRs}{y}}}{\FRd{}{s}{\vec{d/x}}}{y} \\
&\deq \Cut{\FLd{y}{\Delta.\FRs}}{\FRd{}{s}{\vec{d/x}}}{y} \\
&\deq \Trd{(1_y[s/y])}{\FRs[\vec{\D/x}]} \\
&\deq \Trd{s}{\FRs[\vec{\D/x}]}
\end{align*}
using the $\eta$ rule, the $\beta$ rule, then the unit law for horizontal composition.

For $\UL$:
\begin{align*}
\ULd{x}{}{s}{\vec{d/y}}{z.d'}
&\deq \Cut{\ULd{x}{}{s}{\vec{d/y}}{z.d'}}{x}{x} \\
&\deq \Cut{\ULd{x}{}{s}{\vec{d/y}}{z.d'}}{\URd{\Delta.\Cut{\ULs{x}}{x}{x}}}{x} \\
&\deq \Cut{\ULd{x}{}{s}{\vec{d/y}}{z.d'}}{\URd{\Delta.\ULs{x}}}{x} \\
&\deq \Trd{(\Cut{s}{x}{x})}{d'[\ULs{x}[\vec{d/y}]/z]} \\
&\deq \Trd{s}{d'[\ULs{x}[\vec{d/y}]/z]}
\end{align*}
by $\eta$ and $\beta$ for $\Usymb$.
\end{proof}

\begin{conjecture}{Soundness of Permutative Equality} \label{thm:permutative-soundess}
\begin{enumerate}
\item $\Trda{s}{\D} \deq \Trd{s}{\D}$ (for normal \D)
\item $x \deq \Identa{x}$
\item $\Linv{\D}{\vec{y}}{x_0} \deq \Cut{\D}{\FRd{}{1}{\vec{y_i/x_i}}}{x_0}$
\item $\Rinv{\D}{\vec{y}} \deq \Cut{\ULd{x_0}{}{1}{\vec{y_i/x_i}}{z.z}}{\D}{x_0}$
\item $\Cuta{\E}{\D}{x} \deq \Cut{\E}{\D}{x}$ ((for normal \D,\E)
\item $\D \deq \elim{\D}$
\item If $\D \deqp \D'$ then $\D \deq \D'$
\item If $\elim{\D} \deqp \elim{\D'}$ then $\D \deq \D'$.  
\end{enumerate}
\end{conjecture}
\begin{proof}
To show $\Trda{s}{\D} \deq \Trd{s}{\D}$ we induct on the derivation $\D$.
\begin{itemize}
\item \begin{align*}
\Trda{s}{\FRd{}{s'}{\vec{\D/x}}} 
&= \FRd{}{s;s'}{\vec{\D/x}} \\
&\deq \Trd{(s;s')}{\FRs[\vec{\D/x}]} \\
&\deq \Trd{s}{\Trd{s'}{\FRs[\vec{\D/x}]}} \\
&\deq \Trd{s}{\FRd{}{s'}{\vec{\D/x}}}
\end{align*}
using the previous Lemma and functoriality of $(-)_*$.
\item \begin{align*}
\Trda{s}{\FLd{x}{\Delta.\D}} 
&= \FLd{x}{\Delta.\Trda{(s[1_\alpha/x])}{\D}} \\
&\deq \FLd{x}{\Delta.\Trd{(s[1_\alpha/x])}{\D}} \\
&\deq \FLd{x}{\Delta.\Trd{(s[1_\alpha/x])}{\Cut{\FLd{x}{\Delta.\D}}{\FRs}{x}}}\\
&\deq \FLd{x}{\Delta. \Cut{\Trd{s}{\FLd{x}{\Delta.\D}}}{\Trd{(1_\alpha)}{\FRs}}{x}}\\
&\deq \FLd{x}{\Delta. \Cut{\Trd{s}{\FLd{x}{\Delta.\D}}}{\FRs}{x}}\\
&\deq \Trd{s}{\FLd{x}{\Delta.\D}} 
\end{align*}
using the $\beta$ law, the interchange law, and the $\eta$ law.
\item \begin{align*}
\Trda{s}{\ULd{x}{}{s'}{\vec{\D/y}}{z.\D'}} 
&= \ULd{x}{}{s;s'}{\vec{\D/y}}{z.\D'} \\
&\deq \Trd{(s;s')}{d'[\ULs{x}[\vec{\D/y}]/z]} \\
&\deq \Trd{s}{\Trd{s'}{d'[\ULs{x}[\vec{\D/y}]/z]}} \\
&\deq \Trd{s}{\ULd{x}{}{s'}{\vec{\D/y}}{z.\D'}} 
\end{align*}
again by the Lemma.
\item \begin{align*}
\Trda{s}{\URd{\Delta.\D}} 
&= \URd{\Delta.\Trda{(1_\alpha[s/x])}{\D}} \\
&\deq \URd{\Delta.\Trd{(1_\alpha[s/x])}{\Cut{\ULs x}{\UR(\Delta.d)}{x}}} \\
&\deq \URd{\Delta. \Cut{\Trd{(1_\alpha)}{\ULs x}}{\Trd{s}{\UR(\Delta.d)}}{x}} \\
&\deq \URd{\Delta. \Cut{\ULs x}{\Trd{s}{\UR(\Delta.d)}}{x}} \\
&\deq \Trd{s}{\UR(\Delta.d)}
\end{align*}
again by $\beta$ followed by $\eta$.
\end{itemize}
\end{proof}

\begin{conjecture}{Completeness of Permutative Equality.}\\ \label{thm:permutative-completeness}
If $\D \deq \D'$ then $\elim{\D} \deqp \elim{\D'}$
\end{conjecture}

%% FIXME: CITE: CLF, Scherer thesis Chapter 5
